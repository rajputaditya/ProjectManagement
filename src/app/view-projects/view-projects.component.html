<div class="row">
  <div class="col-sm-9">

    <div class="column" *ngFor="let users of userArray">
      <div class="card">
        <div class="additional">
          <a routerLink="/projectDetails" (click)=sendProjectDetail(users)>
            <div class="user-card">
              <div class="level center">
                {{users.priority}}
              </div>
              <div class="points center">
                {{users.manager}}
              </div>
            </div>
            <div class="more-info">
              <h4 id="sendClientName">{{users.clientName}}</h4>
              <div class="info-head">
                <span>{{users.startDate}}</span>
                <span>{{users.endDate}}</span>
              </div>
              <div class="info-head">
                <span>{{users.technologies}}</span>
                <span>{{users.city}} {{users.country}}</span>
              </div>
              <div class="stats">
                <div>
                  <div class="title">DAYS</div>
                  <i class="fa fa-clock-o"></i>
                  <div class="value" >{{totalProjectDaysDiff}}</div>
                </div>
                <div>
                  <div class="title">Pals</div>
                  <i class="fa fa-group"></i>
                  <div class="value">{{Pals}}</div>
                </div>
                <div>
                  <div class="title">Coffee</div>
                  <i class="fa fa-coffee"></i>
                  <div class="value infinity">âˆž</div>
                </div>
              </div>
            </div>
          </a>
        </div>
        <div class="general">
          <h4 id="projectNameCover">{{users.projectName}}</h4>
          <br>
          <p class="general">
            <I>{{users.projectDescription}}</I>
          </p>
          <span class="more">Details</span>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-3" style="position: absolute;z-index: 2;">

    <div >
      <button class="btn btn-light btn-lg" id="projectModBtn" data-toggle="modal"
        data-target="#createProject">Create</button>
      <button class="btn btn-light btn-lg" id="projectModBtn" style="margin-top: 10%;" data-toggle="modal"
        data-target="#editProject">Edit</button>
      <button class="btn btn-light btn-lg" id="projectModBtn" style="margin-top: 15%;" data-toggle="modal"
        data-target="#deleteProject">Delete</button>
    </div>
    <div>
      <img src="/assets/manager.png" alt="IMAGE" id="projectImg">
    </div>
  </div>
</div>

<!-- Edit Project Modal -->
<div class="modal fade" id="editProject" tabindex="-1" role="dialog" aria-labelledby="editProjectLabel"
  aria-hidden="true" style="margin-top: 50px;">
  <div class="modal-dialog modal-lg" role="document">

    <div class="modal-content" id="editProjectModalBody">
      <form>
        <div class="modal-body">
          <!-- Search form -->

          <div class="row">
            <div class="col-sm-12">
              <input id="searchProject" class="form-control form-control-lg" type="text"
                placeholder="Search Project by title" aria-label="Search" style="width: 100%; border-color: black;
                border-radius: 50px;" (input)=searchEditProject() >

            </div>
          </div>
        </div>
        <ul *ngFor="let search of searchdata">
          <li><button (click)=editDetails() id="projectButton" value="{{search}}" class="btn btn-sm btn-dark"
              data-toggle="modal" data-target="#updateProject" data-dismiss="modal" style=" background-color: rgb(80, 79, 79);
              border-color: rgb(80, 79, 79);">{{search}}</button></li>
        </ul>
      </form>
    </div>

  </div>
</div>

<!-- Delete Project Modal -->
<div class="modal fade" id="deleteProject" tabindex="-1" role="dialog" aria-labelledby="deleteProjectLabel"
  aria-hidden="true" style="margin-top: 50px;">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" id="editProjectModalBody">
      <form>
        <div class="modal-body">
          <!-- Delete form -->

          <div class="row">
            <div class="col-sm-12">
              <input class="form-control form-control-lg" type="text" id="searchDeleteProject"
                placeholder="Search Project by title" aria-label="Search" style="width: 100%; border-color: black;
                    border-radius: 50px;" (input)=searchDeleteProject() (blur)=clear()>
            </div>
          </div>


        </div>
        <ul *ngFor="let search of searchdata">
          <li><button id="projectButton" value="{{search}}" class="btn btn-sm btn-dark" data-toggle="modal"
              data-target="#deleteConfirmationModal" data-dismiss="modal" style=" background-color: rgb(80, 79, 79);
            border-color: rgb(80, 79, 79);">{{search}}</button></li>
        </ul>
      </form>
    </div>
  </div>
</div>

<!-- Create Project Modal -->
<div class="modal fade" id="createProject" tabindex="-1" role="dialog" aria-labelledby="createProjectLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" >
      <div class="modal-header" id="modalHeader">
        <h3>PROJECT DETAILS</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)=clear()>
          <span aria-hidden="true" >&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="text-center border p-5" [formGroup]="createProjectForm">


          <div class="form-row mb-2">
            <div class="col">
              <!-- Client name -->
              <input type="text" id="clientName" class="form-control" placeholder="Client name"
                formControlName="clientNameValidator"
                [class.is-invalid]="getClientName.invalid && getClientName.touched">
              <small class="form-text text-muted mb-4">
                Client Name
              </small>
              <div *ngIf="getClientName.invalid && (getClientName.touched || getClientName.dirty)">
                <small *ngIf="getClientName.errors?.required" class="text-danger">
                  Client name is required
                </small>
                <small *ngIf="getClientName.errors?.minlength" class="text-danger">
                  Client name must consist atleast 4 characters
                </small>
              </div>
            </div>

            <div class="col">
              <!-- Project name -->
              <input type="text" id="projectName" class="form-control" placeholder="Project name"
                formControlName="projectNameValidator"
                [class.is-invalid]="getProjectName.invalid && getProjectName.touched">
              <small class="form-text text-muted mb-4">
                Project Name
              </small>
              <div *ngIf="getProjectName.invalid && (getProjectName.touched || getProjectName.dirtty)">
                <small *ngIf="getProjectName.errors?.required" class="text-danger">
                  Project name is required
                </small>
                <small *ngIf="getProjectName.errors?.minlength" class="text-danger">
                  Project name must consist atleast 4 characters
                </small>
              </div>
            </div>
            <div class="col">

              <!-- Technologies -->
              <input type="text" id="projectTech" class="form-control mb-2" placeholder="Technologies"
                formControlName="technologiesValidator"
                [class.is-invalid]="getTechnologies.invalid && getTechnologies.touched">
              <small class="form-text text-muted mb-4">
                Technology
              </small>
              <div *ngIf="getTechnologies.invalid && (getTechnologies.touched || getTechnologies.dirtty)">
                <small *ngIf="getTechnologies.errors?.required" class="text-danger">
                  Technology is required
                </small>
              </div>
            </div>
          </div>

          <div class="form-row mb-2">
            <div class="col">
              <!-- Start Date -->
              <input type="date" id="projectStartdate" class="form-control" placeholder="Start date"
                formControlName="startDateValidator" [class.is-invalid]="getStartDate.invalid && getStartDate.touched">
              <small class="form-text text-muted mb-4">
                Start date
              </small>
              <div *ngIf="getStartDate.invalid && (getStartDate.touched || getStartDate.dirtty)">
                <small *ngIf="getStartDate.errors?.required" class="text-danger">
                  Start date is required
                </small>
              </div>
            </div>
            <div class="col">
              <!-- End Date -->
              <input type="date" id="projectEndDate" class="form-control" placeholder="End date"
                formControlName="endDateValidator" [class.is-invalid]="getEndDate.invalid && getEndDate.touched"
                (blur)=dateValidate()>
              <small class="form-text text-muted mb-4">
                End date
              </small>
              <div *ngIf="getEndDate.invalid && (getEndDate.touched || getEndDate.dirtty)">
                <small *ngIf="getEndDate.errors?.required" class="text-danger">
                  End date is required
                </small>
              </div>

            </div>
            <div class="col">
              <!-- Priority level -->
              <!-- <input type="text" id="projectPriorityLevel" class="form-control" placeholder="HIGH, Medium, low"
                formControlName="priorityLevelValidator"
                [class.is-invalid]="getPriorityLevel.invalid && getPriorityLevel.touched"> -->
                <select class="browser-default custom-select" id="projectPriorityLevel">
                  <option selected value="SELECT">SELECT</option>
                  <option value="HIGH">HIGH</option>
                  <option value="MEDIUM">MEDIUM</option>
                  <option value="LOW">LOW</option>
                </select>
              <small class="form-text text-muted mb-4">
                Priority Level
              </small>
             
            </div>
          </div>

          <div class="form-row mb-2">
            <div class="col">
              <!-- City -->
              <input type="text" id="projectCity" class="form-control" placeholder="City"
                formControlName="cityValidator" [class.is-invalid]="getCity.invalid && getCity.touched">
              <small class="form-text text-muted mb-4">
                City
              </small>
              <div *ngIf="getCity.invalid && (getCity.touched || getCity.dirtty)">
                <small *ngIf="getCity.errors?.required" class="text-danger">
                  City is required
                </small>
                <small *ngIf="getCity.errors?.minlength" class="text-danger">
                  City must consist of atleast 3 characters
                </small>
                <small *ngIf="getCity.errors?.pattern" class="text-danger">
                  City name can not have numbers or any special characters
                </small>
              </div>
            </div>
            <div class="col">
              <!-- Country -->
              <input type="text" id="projectCountry" class="form-control" placeholder="Country"
                formControlName="countryValidator" [class.is-invalid]="getCountry.invalid && getCountry.touched">
              <small class="form-text text-muted mb-4">
                Country
              </small>
              <div *ngIf="getCountry.invalid && (getCountry.touched || getCountry.dirtty)">
                <small *ngIf="getCountry.errors?.required" class="text-danger">
                  Country is required
                </small>
                <small *ngIf="getCountry.errors?.minlength" class="text-danger">
                  Country must consist of atleast 4 characters
                </small>
                <small *ngIf="getCountry.errors?.pattern" class="text-danger">
                  Country name can not have numbers or any special characters
                </small>
              </div>
            </div>
          </div>


          <!-- Project Description -->
          <div class="col">
            <textarea class="form-control mb-2" placeholder="Project description" id="projectDescription"
              formControlName="projectDescriptionValidator"
              [class.is-invalid]="getProjectDescription.invalid && getProjectDescription.touched"></textarea>
            <small class="form-text text-muted mb-4 ">
              Project Description
            </small>
            <div
              *ngIf="getProjectDescription.invalid && (getProjectDescription.touched || getProjectDescription.dirtty)">
              <small *ngIf="getProjectDescription.errors?.required" class="text-danger">
                Project description is required
              </small>
              <small *ngIf="getProjectDescription.errors?.minlength" class="text-danger">
                Project description must consist of atleast 20 characters.
              </small>
            </div>
          </div>


          <!-- Create Project -->
          <div class="alert alert-danger" role="alert" *ngIf="temp==1" style="width: 100%;">
            End date cannot be same or less than Start date.
          </div>
          <button type="button" [disabled]="createProjectForm.invalid" class="btn btn-sm" id="editProjectBtn"
            data-dismiss="modal" (click)=addProject() data-toggle="modal" data-target="#successModal">Create
            Project</button>

        </form>

      </div>
    </div>
  </div>
</div>

<!-- Edit and Update Project Modal -->
<div class="modal" id="updateProject" tabindex="-1" role="dialog" aria-labelledby="updateProjectLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" id="modalHeader">
        <h3>PROJECT DETAILS</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="text-center border p-5" [formGroup]="editProjectForm">


          <div class="form-row mb-2">
            <div class="col">
              <!-- Client name -->
              <input type="text" id="clientName1" [value]=projectData.clientName class="form-control"
                placeholder="Cannot edit this field" disabled>
              <small class="form-text text-muted mb-4">
                Client Name
              </small>
            </div>
            <div class="col">
              <!-- Project name -->
              <input type="text" id="projectName1" [value]=projectData.projectName class="form-control"
                placeholder="Project name" formControlName="editProjectNameValidator"
                [class.is-invalid]="editGetProjectName.invalid && editGetProjectName.touched">
              <small class="form-text text-muted mb-2">
                Project Name
              </small>
              <div *ngIf="editGetProjectName.invalid && (editGetProjectName.touched || editGetProjectName.dirtty)">
                <small *ngIf="editGetProjectName.errors?.required" class="text-danger">
                  Project name is required
                </small>
                <small *ngIf="editGetProjectName.errors?.minlength" class="text-danger">
                  Project name must consist of atleast 4 characters
                </small>
              </div>
            </div>
            <div class="col">
              <!-- Technologies -->
              <input type="text" id="projectTech1" [value]=projectData.technologies class="form-control mb-2"
                placeholder="Technologies" formControlName="editTechnologyValidator"
                [class.is-invalid]="editGetTechnology.invalid && editGetTechnology.touched">
              <small class="form-text text-muted mb-4">
                Technology
              </small>
              <div *ngIf="editGetTechnology.invalid && (editGetTechnology.touched || editGetTechnology.dirtty)">
                <small *ngIf="editGetTechnology.errors?.required" class="text-danger">
                  Technology is required
                </small>
              </div>
            </div>
          </div>
          <div class="form-row mb-2">
            <div class="col">
              <!-- Start Date -->
              <input type="date" id="projectStartdate1" [value]=projectData.startDate class="form-control"
                placeholder="Cannot edit thid field" disabled>
              <small class="form-text text-muted mb-2">
                Start date
              </small>
            </div>
            <div class="col">
              <!-- End Date -->
              <input type="date" id="projectEndDate1" [value]=projectData.endDate class="form-control"
                placeholder="End date" formControlName="editEndDateValidator"
                [class.is-invalid]="editGetEndDate.invalid && editGetEndDate.touched">
              <small class="form-text text-muted mb-2">
                End date
              </small>
              <div *ngIf="editGetEndDate.invalid && (editGetEndDate.touched || editGetEndDate.dirtty)">
                <small *ngIf="editGetEndDate.errors?.required" class="text-danger">
                  End Date is required
                </small>
              </div>
            </div>
            <div class="col">
              <!-- Priority level -->
              <!-- <input type="text" id="projectPriorityLevel1" [value]=projectData.priority class="form-control"
                placeholder="HIGH, Medium, low" formControlName="editPriorityValidator"
                [class.is-invalid]="editGetPriority.invalid && editGetPriority.touched"> -->
                <select class="browser-default custom-select" id="projectPriorityLevel1"[value]="projectData.priority" >
                  <option selected>SELECT</option>
                  <option value="HIGH">HIGH</option>
                  <option value="MEDIUM">MEDIUM</option>
                  <option value="LOW">LOW</option>
                </select>
              <small class="form-text text-muted mb-2">
                Priority Level
              </small>
            </div>
          </div>
          <div class="form-row mb-2">
            <div class="col">
              <!-- City -->
              <input type="text" id="projectCity1" [value]=projectData.city class="form-control" placeholder="City"
                formControlName="editCityValidator" [class.is-invalid]="editGetCity.invalid && editGetCity.touched">
              <small class="form-text text-muted mb-2">
                City
              </small>
              <div *ngIf="editGetCity.invalid && (editGetCity.touched || editGetCity.dirtty)">
                <small *ngIf="editGetCity.errors?.required" class="text-danger">
                  City is required
                </small>
                <small *ngIf="editGetCity.errors?.minlength" class="text-danger">
                  City must consist of atleast 3 characters
                </small>
              </div>
            </div>
            <div class="col">
              <!-- Country -->
              <input type="text" id="projectCountry1" [value]=projectData.country class="form-control"
                placeholder="Country" formControlName="editCountryValidator"
                [class.is-invalid]="editGetCountry.invalid && editGetCountry.touched">
              <small class="form-text text-muted mb-2">
                Country
              </small>
              <div *ngIf="editGetCountry.invalid && (editGetCountry.touched || editGetCountry.dirtty)">
                <small *ngIf="editGetCountry.errors?.required" class="text-danger">
                  Country is required
                </small>
                <small *ngIf="editGetCountry.errors?.minlength" class="text-danger">
                  Country must consist of atleast 4 characters
                </small>
              </div>
            </div>
          </div>



          <!-- Project Description -->
          <div class="col">
            <textarea type="text" id="editProjectDescription" class="form-control mb-2"
              [value]=projectData.projectDescription placeholder="Project description"
              formControlName="editProjectDescriptionValidator"
              [class.is-invalid]="getEditProjectDescription.invalid && getEditProjectDescription.touched"></textarea>
            <small class="form-text text-muted mb-4 ">
              Project Description
            </small>
            <div
              *ngIf="getEditProjectDescription.invalid && (getEditProjectDescription.touched || getEditProjectDescription.dirtty)">
              <small *ngIf="getEditProjectDescription.errors?.required" class="text-danger">
                Project description is required
              </small>
              <small *ngIf="getEditProjectDescription.errors?.minlength" class="text-danger">
                Project description must consist of atleast 20 characters.
              </small>
            </div>
          </div>

          <!-- update Project -->
          <button type="button" class="btn btn-sm" id="editProjectBtn" data-dismiss="modal" (click)=updateProject()
            data-toggle="modal" data-target="#successUpdateModal">Update Project</button>

        </form>

      </div>
    </div>
  </div>
</div>

<!-- Successfully created a project Modal -->
<div id="successModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-confirm" id="successConfirmModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="icon-box" id="successIcon">
          <i class="fa fa-check" aria-hidden="true"></i>
        </div>
        <h4 class="modal-title">Awesome!</h4>
      </div>
      <div class="modal-body">
        <p class="text-center">Successfully created a new project.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success btn-block" id="successButton" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

<!-- Successfully updated a project Modal -->
<div id="successUpdateModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-confirm" id="successConfirmModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="icon-box" id="successIcon">
          <i class="fa fa-check" aria-hidden="true"></i>
        </div>
        <h4 class="modal-title">Awesome!</h4>
      </div>
      <div class="modal-body">
        <p class="text-center">Successfully updated a project.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success btn-block" id="successButton" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Modal -->
<div id="deleteConfirmationModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-confirm" id="deleteModal">
    <div class="modal-content" id="deleteModalContent">

      <div class="modal-header" id="deleteModalHeader">
        <div class="icon-box" id="deleteIcon">
          <i class="fa fa-times" aria-hidden="true"></i>
        </div>
        <div class="modal-title">
          <h4>Are you sure?</h4>

        </div>
      </div>
      <div class="modal-body">
        <p>Do you really want to delete these records? This process cannot be undone.</p>
      </div>
      <div class="modal-footer" id="deleteModalFooter">
        <button type="button" class="btn btn-info" data-dismiss="modal" id="deleteBtnInfo">Cancel</button>
        <button type="button" class="btn btn-danger" (click)=delProject() data-dismiss="modal" id="deleteBtnDanger">Delete</button>
      </div>
    </div>
  </div>
</div>